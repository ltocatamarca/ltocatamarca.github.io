
 <!DOCTYPE html>
<html>
<head>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PRQVNXL');</script>

<title>APP M3U.CL - IPTV Chile</title>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet" rel="preconnect">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="preconnect">
<link href="https://vjs.zencdn.net/7.8.2/video-js.css" rel="stylesheet" rel="preconnect" />
<link href="/chromecast/videojs-google-chromecast-master/dist/css/plugin.css" rel="stylesheet">
<script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
<link async type="text/css" rel="stylesheet" href="../css/style.css">
<link href="../flag-icon-css-master/css/flag-icon.css" rel="stylesheet">

<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#1B1C1D">
<link rel="manifest" href="manifest.json">
<link rel='shortcut icon' href='https://www.m3u.cl/img/favicon.ico'>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PRQVNXL"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<nav>
<div class="nav-wrapper">
<a href="#" class="brand-logo" alt="M3U.cl" onclick=""><img src="../img/M3U-blanco.png" height="50px"></a>
<a href="#" data-target="mobile-demo" class="sidenav-trigger right"><i class="material-icons">menu</i></a>
<ul class="right hide-on-med-and-down">
<li><a href="/" target="_blank"><strong>Ir a M3U.CL</strong></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="AR"><span class="flag-icon flag-icon-ar"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="BR"><span class="flag-icon flag-icon-br"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="BO"><span class="flag-icon flag-icon-bo"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="CL"><span class="flag-icon flag-icon-cl"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="CO"><span class="flag-icon flag-icon-co"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="EC"><span class="flag-icon flag-icon-ec"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="ES"><span class="flag-icon flag-icon-es"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="MX"><span class="flag-icon flag-icon-mx"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="PE"><span class="flag-icon flag-icon-pe"></span></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="VE"><span class="flag-icon flag-icon-ve"></span></a></li>
</ul>
</div>
</nav>
<ul class="sidenav" id="mobile-demo">

<li><a href="/" target="_blank"><strong>Ir a M3U.CL</strong></a></li>
<li class="divider"></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="favoritos"><i class="material-icons yellow-text left">star</i> <b>Favoritos</b></a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="AR"><span class="flag-icon flag-icon-ar"></span> Argentina</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="BR"><span class="flag-icon flag-icon-br"></span> Brasil</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="BO"><span class="flag-icon flag-icon-bo"></span> Bolivia</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="CL"><span class="flag-icon flag-icon-cl"></span> Chile</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="CO"><span class="flag-icon flag-icon-co"></span> Colombia</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="CR"><span class="flag-icon flag-icon-cr"></span> Costa Rica</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="EC"><span class="flag-icon flag-icon-ec"></span> Ecuador</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="ES"><span class="flag-icon flag-icon-es"></span> España</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="MX"><span class="flag-icon flag-icon-mx"></span> Mexico</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="PY"><span class="flag-icon flag-icon-py"></span> Paraguay</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="PE"><span class="flag-icon flag-icon-pe"></span> Perú</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="DO"><span class="flag-icon flag-icon-do"></span> Republica Dominicana</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="VE"><span class="flag-icon flag-icon-ve"></span> Venezuela</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="musica"><i class="material-icons left">music_video</i> Música</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="religiosos"><i class="material-icons left">flare</i> Religiosos</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="top"><i class="material-icons yellow-text left">star</i> Top</a></li>
<li><a href="#" class="cargar-lista sidenav-close" id-lista="total"><i class="material-icons yellow-text left">star</i> Total</a></li>
<li class="divider"></li>
<li><a href="https://twitter.com/m3ucl?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-size="large" data-lang="es" data-show-count="false">Follow @m3ucl</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></li>
</ul>
<video id="my-video" class="video-js vjs-16-9" controls preload="auto" poster="../logo/logo-M3U-negro-cl.png">
<source src="https://mdstrm.com/live-stream-playlist/5aaabe9e2c56420918184c6d.m3u8?WebM3UCL" type="application/x-mpegURL" />
</video>
<div class="col s12">
<div class="input-field">
<input id="buscar" type="search" autocomplete="off">
<label for="buscar">Buscar</label>
</div>
<div id="tabla_canales" style="overflow-y: scroll; height: 280px;">
<div class="preloader-wrapper big active">
<div class="spinner-layer spinner-blue">
<div class="circle-clipper left">
<div class="circle"></div>
</div><div class="gap-patch">
<div class="circle"></div>
</div><div class="circle-clipper right">
<div class="circle"></div>
</div>
</div>
<div class="spinner-layer spinner-red">
<div class="circle-clipper left">
<div class="circle"></div>
</div><div class="gap-patch">
<div class="circle"></div>
</div><div class="circle-clipper right">
<div class="circle"></div>
</div>
</div>
<div class="spinner-layer spinner-yellow">
<div class="circle-clipper left">
<div class="circle"></div>
</div><div class="gap-patch">
<div class="circle"></div>
</div><div class="circle-clipper right">
<div class="circle"></div>
</div>
</div>
<div class="spinner-layer spinner-green">
<div class="circle-clipper left">
<div class="circle"></div>
</div><div class="gap-patch">
<div class="circle"></div>
</div><div class="circle-clipper right">
<div class="circle"></div>
</div>
</div>
</div>
</div>
<div class="not-found" style="display: none;">No Encontrado</div>
</div>

<ins class="adsbygoogle" style="display:block;width:100%;" data-ad-client="ca-pub-2459454703010215" data-ad-slot="8675605523" data-ad-format="fluid" data-full-width-responsive="false"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" rel="preconnect"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" rel="preconnect"></script>
<script src="https://vjs.zencdn.net/7.8.2/video.min.js" rel="preconnect"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-landscape-fullscreen@11.1111.0/dist/videojs-landscape-fullscreen.min.js" rel="preconnect"></script>
<script src="../chromecast/videojs-google-chromecast-master/dist/app.js"></script>
<script src="../chromecast/videojs-google-chromecast-master/dist/videojs-google-chromecast.js"></script>
<script src="../js/app.js"></script>
<script src="../scripts/main.js"></script>
<script type="text/javascript" src="../js/tablefilter.js"></script>
<script>
      var player = videojs('my-video', {
          autoplay: true,
          responsive: true,
          chromecast:{
            metadata:{
              title:'M3U.CL',
              subtitle: 'IPTV Chile',
              images: [{url: 'https://www.m3u.cl/logo/logo-M3U-negro-cl.png'}]
            }
         }
      });

          player.landscapeFullscreen({
          fullscreen: {
            enterOnRotate: true,
            exitOnRotate: true,
            alwaysInLandscapeMode: true,
            iOS: true
          }
        });

        /*componentWillUnmount() {
          if (this.player) {
            this.player.dispose()
          }
        }*/

      function iconoCategoria(categoria){
        var icono;
        if(categoria=='Musica')
        icono="music_video";
        else if(categoria=='Infantiles')
        icono="child_care";
        else if(categoria=='Radio')
        icono="radio";
        else if(categoria=='Universitarios')
        icono="school";
        else if(categoria=='Internacional')
        icono="language";
        else if(categoria=='Nacionales')
        icono="flag";
        else if(categoria=='Deportes')
        icono="directions_bike";
        else if(categoria=='Religiosos')
        icono="flare";
        else if(categoria=='Noticias')
        icono="insert_drive_file";
        else if(categoria=='Culturales')
        icono="local_library";
        else if(categoria=='Peliculas y Series')
        icono="movie_filter";
        else if(categoria=='TV Comunitarias')
        icono="people";
        else if(categoria=='TV Online')
        icono="live_tv";
        else
        icono="tv";
        return icono;
        }

        function filtrar_canal(){
          $('table.highlight').tableFilter({
          // input field to filter table rows
          'input' : 'input#buscar',
          // trigger events and elements
          'trigger': {
            "event"   : "keyup",
            'element'   : undefined
          },
          // case sensitive
          'caseSensitive' :  false,
          // Timeout for keyboard events (keyup, keypress ...)
          'timeout' : -1,
          // enable table sort
          'sort'  : true,
          // not found element
          // e.g. notFoundElement : ".not-found"
          'notFoundElement' : ".not-found",
          // callback
          'callback'  : function(){}
        });
        }

        function reproducir_canal(){
          $( "div.btn-reproducir" ).click(function() {
          dataLayer.push({'event' : 'ga-event', 'event-action' : 'reproducir', 'event-category' : 'reproductor APP', 'event-label': $(this).attr('nombre_canal')});
          player.options_.chromecast.metadata.title="Estás viendo "+$(this).attr('nombre_canal')+" por M3U.CL";
          player.options_.chromecast.metadata.subtitle="por M3U.CL";
          player.src({
              src: $(this).attr('reproducir_canal'),
              type: 'application/x-mpegURL'
            });
          });
        }

        function leer_favoritos(){
          var data;
          data=JSON.parse(localStorage.getItem('fav2'));
          return data;
        }

        function guardar_favoritos(data){
          localStorage.setItem('fav2', JSON.stringify(data));
        }

        function agregar_favoritos(){
          $( "button.agregar_favoritos" ).click(function() {
            var id_canal=$(this).attr("id_canal");
            var nombre_canal=$(this).attr("nombre_canal");
            var url_canal=$(this).attr("url_canal");
            var logo=$(this).attr("logo");
            var nombre_categoria=$(this).attr("nombre_categoria");
            var data=leer_favoritos();
            data[id_canal]={'id_canal':id_canal, 'nombre_canal':nombre_canal, 'url_canal':url_canal, 'logo':logo,'nombre_categoria':nombre_categoria};
            console.log(data);
            guardar_favoritos(data);
            $("button.agregar_favoritos[id_canal='"+id_canal+"']").addClass("hide");
            $("button.eliminar_favoritos[id_canal='"+id_canal+"']").removeClass("hide");
          });
        }

        function eliminar_favoritos(){
          $( "button.eliminar_favoritos" ).click(function() {
            var id_canal=$(this).attr("id_canal");
            var data=leer_favoritos();
            delete data[id_canal];
            guardar_favoritos(data);
            $("button.agregar_favoritos[id_canal='"+id_canal+"']").removeClass("hide");
            $("button.eliminar_favoritos[id_canal='"+id_canal+"']").addClass("hide");
          });
        }

        function boton_favorito(){
          var data=leer_favoritos();
          for (const prop in data) {
            $("button.agregar_favoritos[id_canal='"+data[prop].id_canal+"']").addClass("hide");
            $("button.eliminar_favoritos[id_canal='"+data[prop].id_canal+"']").removeClass("hide");
          }
        }

        function cargar_lista(id_lista){
          if(id_lista=='favoritos'){
            dataLayer.push({'event' : 'ga-pageview', 'page' : '/app/'+id_lista, 'page-title' : id_lista+' - APP M3U.CL'});
            var tabla1;
            tabla1='<table class="highlight"><tbody>';
            var data=leer_favoritos();
            for (const prop in data) {
                //console.log(data[prop].id_canal +' '+ data[prop].nombre_canal +' '+ data[prop].url_canal);
                var tabla2;
                tabla2+='<tr><td height="76px"><div class="btn-reproducir" reproducir_canal="'+data[prop].url_canal+'" nombre_canal="'+data[prop].nombre_canal+'" role="button" aria-pressed="false" tabindex="0"><img loading="lazy" style="margin-left: 20px;margin-right: 20px;vertical-align: middle;" width="40px" src="'+data[prop].logo+'"></div></td><td><div class="btn-reproducir" reproducir_canal="'+data[prop].url_canal+'" nombre_canal="'+data[prop].nombre_canal+'" role="button" aria-pressed="false" tabindex="0"> <b>'+data[prop].nombre_canal+'</b> <br><sub>'+data[prop].nombre_categoria+'</sub></div></td><td><button class="btn waves-effect waves-light white agregar_favoritos hide" id_canal="'+data[prop].id_canal+'" nombre_canal="'+data[prop].nombre_canal+'" url_canal="'+data[prop].url_canal+'" logo="'+data[prop].logo+'" nombre_categoria="'+data[prop].nombre_categoria+'"><i class="material-icons yellow-text">star_border</i></button><button class="btn waves-effect waves-light yellow eliminar_favoritos" id_canal="'+data[prop].id_canal+'"><i class="material-icons white-text">star_border</i></button></td></tr>';
            }
            var tabla3;
            tabla3='</tbody></table>';
            $("#tabla_canales").html(tabla1+tabla2+tabla3);
            reproducir_canal();
            filtrar_canal();
            eliminar_favoritos();
            agregar_favoritos();
          }
          else{
        $.ajax({ type: "POST", url: "../crud.php",
            data: { acc: "leer_lista_privada_app", id_usuario: id_lista},
              success: function(data){
              dataLayer.push({'event' : 'ga-pageview', 'page' : '/app/'+id_lista, 'page-title' : id_lista+' - APP M3U.CL'});
              console.log(data);
              var tabla1='<table class="highlight"><tbody>';
              var tabla2='';
              $.each(data.canales, function(i, val) {
                tabla2+='<tr><td height="76px"><div class="btn-reproducir" reproducir_canal="'+val['url_canal']+'" nombre_canal="'+val['nombre_canal']+'" role="button" aria-pressed="false" tabindex="0"><img loading="lazy" style="margin-left: 20px;margin-right: 20px;vertical-align: middle;" width="40px" src="'+ val['logo']+'"></div></td><td><div class="btn-reproducir" reproducir_canal="'+val['url_canal']+'" nombre_canal="'+val['nombre_canal']+'" role="button" aria-pressed="false" tabindex="0"> <b>'+val['nombre_canal']+'</b> <br><sub>'+val['nombre_categoria']+'</sub></div></td><td><button class="btn waves-effect waves-light white agregar_favoritos" id_canal="'+val['id_canal']+'" nombre_canal="'+val['nombre_canal']+'" url_canal="'+val['url_canal']+'" logo="'+val['logo']+'" nombre_categoria="'+val['nombre_categoria']+'"><i class="material-icons yellow-text">star_border</i></button><button class="btn waves-effect waves-light yellow eliminar_favoritos hide" id_canal="'+val['id_canal']+'"><i class="material-icons white-text">star_border</i></button></td></tr>';
              });
              var tabla3='</tbody></table>';
              $("#tabla_canales").html(tabla1+tabla2+tabla3);
              reproducir_canal();
              filtrar_canal();
              eliminar_favoritos();
              agregar_favoritos();
              boton_favorito();
              }
            });
          }
        }

        if(localStorage.getItem('fav2')==null)
        localStorage.setItem('fav2', JSON.stringify({}));
        cargar_lista('CL');

        var ad_refresher = setInterval(function(){
        $(".adsbygoogle").each(function(i,e){
            $(e).html($(e).html())
        });
        }, 60000);

    $( "a.cargar-lista" ).click(function() {
      cargar_lista($(this).attr('id-lista'));
    });

    var width = screen.width;
    //$(".adsbygoogle").css("width", width);

    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon='{"rayId":"7287097d3db58d9a","version":"2022.6.0","r":1,"token":"3ffd6f51ce76467dbb1172896b49ae18","si":100}' crossorigin="anonymous"></script>
</body>
</html>
